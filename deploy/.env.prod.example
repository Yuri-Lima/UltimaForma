# Production environment for deploy/
# Copy to .env.prod and fill values before deployment
#
# IMPORTANT: Always run docker compose with --env-file .env.prod so Traefik
# receives EMAIL_LETSENCRYPT for Let's Encrypt ACME. Use: ./deploy.sh or
# docker compose -f docker-compose.yml --env-file .env.prod up -d
#
# DNS for ultimaforma.id must point to this server's public IP.
# Traefik will obtain Let's Encrypt certs automatically.

# Docker image tag. Auto-generated by build-and-push.sh (YYYYMMDD.N) or set manually. Omit for latest.
IMAGE_TAG=20250224.1

# Domain (DNS must be configured). DOMAIN and APP_SUBDOMAIN are used for Traefik
# routing and CORS_ORIGIN (both ultimaforma.id and app.ultimaforma.id must work).
DOMAIN=ultimaforma.id
API_SUBDOMAIN=api
APP_SUBDOMAIN=app
# Required: valid email for Let's Encrypt ACME (cert expiry notifications).
# Use format: user@domain.com (no quotes). Empty/invalid causes "unable to parse email address".
# Avoid BOM, trailing spaces, or CRLF if editing on Windows.
EMAIL_LETSENCRYPT=admin@ultimaforma.id

# Database (primary: postgres:18 for users, refresh_tokens, etc.)
# DB_HOST overridden by deploy.sh for migrations (postgres/vector-db = container names).
DB_HOST=127.0.0.1
DB_PORT=5432
DB_USERNAME=postgres
# Use strong password in production: openssl rand -hex 16
DB_PASSWORD=changeme
DB_NAME=ultimaforma

# Vector DB (embeddings only; pgvector). Optional: defaults to DB_* with _vector suffix for name.
VECTOR_DB_HOST=vector-db
VECTOR_DB_PORT=5432
VECTOR_DB_NAME=ultimaforma_vector
VECTOR_DB_USERNAME=postgres
VECTOR_DB_PASSWORD=changeme

# JWT (generate: openssl rand -hex 64)
JWT_SECRET=

# MFA encryption (32-byte hex)
MFA_SECRET_ENCRYPTION_KEY=

# Redis (containers use redis:6379 from compose; only password needed here)
# Use strong password in production: openssl rand -hex 16
REDIS_PASSWORD=changeme

# OpenAI (rotate key if previously used in development)
OPENAI_API_KEY=
